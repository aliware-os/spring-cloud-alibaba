<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.47" />
    <meta name="description" content="Documentation for Spring Cloud Alibaba">
<meta name="author" content="Aliware Docs">

    <link rel="shortcut icon" href="/spring-cloud-alibaba/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/spring-cloud-alibaba/images/favicon.png" type="image/x-icon" />
    <title>Alicloud Storage Example :: Documentation for Spring Cloud Alibaba</title>

    
    <link href="/spring-cloud-alibaba/css/nucleus.css?1542024317" rel="stylesheet">
    <link href="/spring-cloud-alibaba/css/fontawesome-all.min.css?1542024317" rel="stylesheet">
    <link href="/spring-cloud-alibaba/css/hybrid.css?1542024317" rel="stylesheet">
    <link href="/spring-cloud-alibaba/css/featherlight.min.css?1542024317" rel="stylesheet">
    <link href="/spring-cloud-alibaba/css/perfect-scrollbar.min.css?1542024317" rel="stylesheet">
    <link href="/spring-cloud-alibaba/css/auto-complete.css?1542024317" rel="stylesheet">
    <link href="/spring-cloud-alibaba/css/theme.css?1542024317" rel="stylesheet">
    <link href="/spring-cloud-alibaba/css/hugo-theme.css?1542024317" rel="stylesheet">
    
      <link href="/spring-cloud-alibaba/css/theme-blue.css?1542024317" rel="stylesheet">
    

    <script src="/spring-cloud-alibaba/js/jquery-2.x.min.js?1542024317"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/spring-cloud-alibaba/en/quick_start/alicloud-storage/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://getgrav.org">
  <svg id="grav-logo" width="100%" height="100%" viewBox="0 0 504 140" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
    <path d="M235.832,71.564l-7.98,-0.001c-1.213,0.001 -2.197,0.987 -2.197,2.204l0,15.327l-0.158,0.132c-4.696,3.962 -10.634,6.14 -16.719,6.14c-14.356,0 -26.034,-11.68 -26.034,-26.037c0,-14.358 11.678,-26.035 26.034,-26.035c5.582,0 10.919,1.767 15.437,5.113c0.877,0.649 2.093,0.56 2.866,-0.211l5.69,-5.69c0.444,-0.442 0.675,-1.055 0.639,-1.681c-0.034,-0.627 -0.336,-1.206 -0.828,-1.597c-6.76,-5.363 -15.214,-8.314 -23.805,-8.314c-21.18,0 -38.414,17.233 -38.414,38.415c0,21.183 17.234,38.415 38.414,38.415c10.937,0 21.397,-4.705 28.698,-12.914c0.358,-0.403 0.556,-0.921 0.556,-1.46l0,-19.603c0,-1.217 -0.985,-2.203 -2.2,-2.203"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M502.794,34.445c-0.408,-0.616 -1.1,-0.989 -1.838,-0.989l-8.684,0c-0.879,0 -1.673,0.522 -2.022,1.329l-24.483,56.839l-24.92,-56.852c-0.352,-0.799 -1.142,-1.316 -2.012,-1.316l-8.713,0c-0.744,0 -1.44,0.373 -1.843,0.995c-0.408,0.623 -0.476,1.408 -0.174,2.09l30.186,68.858c0.352,0.799 1.143,1.317 2.017,1.317l10.992,0c0.879,0 1.673,-0.527 2.021,-1.329l29.655,-68.861c0.289,-0.68 0.222,-1.461 -0.182,-2.081"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M388.683,34.772c-0.353,-0.798 -1.142,-1.316 -2.017,-1.316l-10.988,0c-0.879,0 -1.673,0.522 -2.021,1.329l-29.655,68.861c-0.294,0.675 -0.226,1.46 0.182,2.077c0.407,0.619 1.096,0.993 1.838,0.993l8.684,0c0.879,0 1.673,-0.526 2.022,-1.329l24.478,-56.842l24.92,56.854c0.353,0.798 1.143,1.317 2.013,1.317l8.717,0c0.744,0 1.44,-0.374 1.843,-0.993c0.408,-0.624 0.471,-1.41 0.174,-2.094l-30.19,-68.857Z"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M309.196,81.525l0.476,-0.229c8.675,-4.191 14.279,-13.087 14.279,-22.667c0,-13.881 -11.295,-25.174 -25.176,-25.174l-31.863,0c-1.214,0 -2.199,0.988 -2.199,2.202l0,68.855c0,1.219 0.985,2.204 2.199,2.204l7.979,0c1.214,0 2.2,-0.985 2.2,-2.204l0,-58.679l21.684,0c7.059,0 12.799,5.739 12.799,12.796c0,5.885 -3.996,10.989 -9.728,12.408c-1.032,0.261 -2.064,0.393 -3.071,0.393l-7.977,0c-0.829,0 -1.585,0.467 -1.959,1.205c-0.378,0.74 -0.305,1.625 0.187,2.296l22.62,30.884c0.412,0.566 1.07,0.901 1.771,0.901l9.915,0c0.827,0 1.587,-0.467 1.96,-1.207c0.378,-0.742 0.302,-1.629 -0.186,-2.296l-15.91,-21.688Z"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M107.191,80.969c-7.255,-4.794 -11.4,-8.845 -15.011,-16.109c-2.47,4.977 -8.236,12.376 -17.962,18.198c-4.856,15.106 -27.954,44.015 -35.43,39.916c-2.213,-1.212 -2.633,-2.808 -2.133,-4.456c0.536,-4.129 9.078,-13.62 9.078,-13.62c0,0 0.18,1.992 2.913,6.187c-3.609,-11.205 5.965,-25.031 8.5,-29.738c3.985,-1.269 4.274,-6.387 4.274,-6.387c0.255,-7.909 -3.278,-13.635 -6.701,-17.059c2.459,3.002 3.255,7.539 3.372,11.694l0,0.023c0.012,0.469 0.012,0.93 0.011,1.39c-0.117,3.439 -1.157,8.19 -3.383,8.19l0.006,0.03c-2.289,-0.098 -5.115,0.391 -7.639,1.18l-5.582,1.334c0,0 2.977,-0.136 4.584,1.252c-1.79,2.915 -5.769,6.533 -10.206,8.588c-6.457,2.995 -8.312,-2.964 -5.034,-6.838c0.805,-0.946 1.618,-1.745 2.387,-2.399c-0.495,-0.513 -0.807,-1.198 -0.889,-2.068c-0.001,-0.005 -0.004,-0.009 -0.005,-0.013c-0.45,-1.977 -0.202,-4.543 2.596,-8.623c0.551,-0.863 1.214,-1.748 2.007,-2.647c0.025,-0.031 0.046,-0.059 0.072,-0.089c0.034,-0.042 0.072,-0.08 0.108,-0.121c0.02,-0.023 0.039,-0.045 0.059,-0.068c0.2,-0.228 0.413,-0.45 0.639,-0.663c3.334,-3.414 8.599,-6.966 16.897,-10.152c9.675,-14.223 13.219,-16.89 13.219,-16.89c1.071,-1.096 2.943,-2.458 3.632,-2.805c-5.053,-8.781 -6.074,-21.158 -4.75,-24.493c-0.107,0.18 -0.206,0.365 -0.287,0.556c0.49,-1.143 0.819,-1.509 1.328,-2.111c1.381,-1.632 6.058,-2.488 7.737,0.971c0.895,1.844 1.063,4.232 1.034,6.023c-3.704,-0.193 -7.063,4.036 -7.063,4.036c0,0 3.067,-1.448 6.879,-1.473c0,0 1.015,0.883 2.283,2.542c-1.712,3.213 -4.524,10.021 -2.488,17.168c0.338,1.408 0.849,2.619 1.483,3.648c0.024,0.045 0.044,0.089 0.069,0.135c0.051,0.066 0.096,0.122 0.144,0.183c3.368,5.072 9.542,5.665 9.542,5.665c-2.906,-1.45 -5.274,-3.76 -6.816,-6.56c-0.8,-1.498 -1.291,-2.762 -1.592,-3.761c-1.636,-6.313 0.771,-9.999 2.149,-12.471c3.17,-4.917 8.944,-7.893 15.151,-7.185c8.712,0.995 14.968,8.862 13.973,17.571c-0.608,5.321 -3.781,9.723 -8.142,12.117c1.049,2.839 -0.073,6.28 -0.073,6.28c2.642,3.323 2.758,5.238 2.667,7.017c-3.357,-0.565 -6.618,1.701 -6.618,1.701c0,0 6.476,-1.546 10.238,1.81c2.446,2.631 4.078,5.009 5.051,6.766c1.393,2.505 7.859,2.683 7.123,7.188c-0.737,4.499 -5.669,4.542 -13.401,-0.56M69.571,0c-38.424,0 -69.571,31.148 -69.571,69.567c0,38.422 31.147,69.573 69.571,69.573c38.42,0 69.568,-31.151 69.568,-69.573c0,-38.42 -31.148,-69.567 -69.568,-69.567"
      style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M73.796,51.693c0.813,-0.814 0.813,-2.134 0,-2.947c-0.815,-0.814 -2.133,-0.814 -2.947,0c-0.815,0.813 -0.815,2.133 0,2.947c0.814,0.813 2.132,0.813 2.947,0" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M66.445,53.149c-0.814,0.813 -0.814,2.133 0,2.947c0.813,0.814 2.133,0.814 2.947,0c0.813,-0.814 0.813,-2.134 0,-2.947c-0.814,-0.813 -2.134,-0.813 -2.947,0" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M79.231,54.233c-1.274,-1.274 -3.339,-1.272 -4.611,0l-2.713,2.712c-1.274,1.275 -1.274,3.339 0,4.612l2.978,2.978c1.274,1.275 3.338,1.274 4.611,0l2.712,-2.712c1.274,-1.274 1.274,-3.339 0,-4.612l-2.977,-2.978Z" style="fill:#000;fill-rule:nonzero;"></path>
    <path d="M95.759,41.445c-2.151,-2.578 1.869,-7.257 4.391,-4.463c4.645,5.148 -2.237,7.041 -4.391,4.463M105.004,44.132c3.442,-6.553 -1.427,-10.381 -4.773,-13.523c-5.36,-5.039 -10.706,-7.217 -16.811,-0.241c-6.102,6.977 -2.226,15.068 3.356,19.061c5.584,3.994 14.782,1.255 18.228,-5.297"
      style="fill:#000;fill-rule:nonzero;"></path>
  </svg>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-close"></i></span>
</div>

<script type="text/javascript" src="/spring-cloud-alibaba/js/lunr.min.js?1542024317"></script>
<script type="text/javascript" src="/spring-cloud-alibaba/js/auto-complete.js?1542024317"></script>
<script type="text/javascript">
    
        var baseurl = "\/spring-cloud-alibaba\/en";
    
</script>
<script type="text/javascript" src="/spring-cloud-alibaba/js/search.js?1542024317"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/spring-cloud-alibaba/en/roadmap/" title="Roadmap" class="dd-item 
        
        
        
        ">
      <a href="/spring-cloud-alibaba/en/roadmap/">
          Roadmap
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/spring-cloud-alibaba/en/quick_start/" title="Quick Start" class="dd-item 
        parent
        
        
        ">
      <a href="/spring-cloud-alibaba/en/quick_start/">
          Quick Start
          
            <i class="fas read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/spring-cloud-alibaba/en/quick_start/nacos-discovery/" title="Nacos Discovery Example" class="dd-item 
        
        
        
        ">
      <a href="/spring-cloud-alibaba/en/quick_start/nacos-discovery/">
          Nacos Discovery Example
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/spring-cloud-alibaba/en/quick_start/nacos-config/" title="Nacos Config Example" class="dd-item 
        
        
        
        ">
      <a href="/spring-cloud-alibaba/en/quick_start/nacos-config/">
          Nacos Config Example
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/spring-cloud-alibaba/en/quick_start/alicloud-storage/" title="Alicloud Storage Example" class="dd-item 
        parent
        active
        
        ">
      <a href="/spring-cloud-alibaba/en/quick_start/alicloud-storage/">
          Alicloud Storage Example
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/spring-cloud-alibaba/en/quick_start/sentinel/" title="" class="dd-item 
        
        
        
        ">
      <a href="/spring-cloud-alibaba/en/quick_start/sentinel/">
          
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spring-cloud-alibaba/en/quick_start/test/" title="" class="dd-item ">
        <a href="/spring-cloud-alibaba/en/quick_start/test/">
        
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba"><i class='fab fa-fw fa-github'></i> Github Repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://aliware-os.github.io/spring-cloud-alibaba/en/roadmaps"><i class='fas fa-fw fa-camera'></i> Roadmap</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-fw fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/spring-cloud-alibaba/en/quick_start/alicloud-storage/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="zh-cn" value="/spring-cloud-alibaba/zh-cn/quick_start/alicloud-storage/">简体中文</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/aliware-os/spring-cloud-alibaba/edit/master/content/quick_start/alicloud-storage/_index.en.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/spring-cloud-alibaba/en/'>Spring Cloud Alibaba</a> > <a href='/spring-cloud-alibaba/en/quick_start/'>Quick Start</a> > Alicloud Storage Example
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#demo">Demo</a>
<ul>
<li><a href="#connect-to-oss">Connect to OSS</a></li>
<li><a href="#start-application">Start Application</a></li>
<li><a href="#upload-or-download-files">Upload or download files</a>
<ul>
<li><a href="#upload-files">Upload files</a></li>
<li><a href="#download-files">Download files</a></li>
</ul></li>
<li><a href="#verify-results-on-oss">Verify results on OSS</a></li>
</ul></li>
<li><a href="#endpoint">Endpoint</a></li>
<li><a href="#multiple-ossclients">Multiple OSSClients</a></li>
<li><a href="#stop-ossclient-service">Stop OSSClient service</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Alicloud Storage Example</h1>
          

        




<h2 id="introduction">Introduction</h2>

<p>If your applications are Spring Cloud applications and you need to use Alibaba Cloud&rsquo;s OSS service for file storage (for example, storing commodity image for your e-commerce business), you can use OSS starter. This topic provides an example to illustrate how to use OSS starter to implement object storage for Spring Cloud applications.</p>

<p><a href="https://www.alibabacloud.com/product/oss">Alibaba Cloud Object Storage Service (OSS)</a> is an encrypted, secure, cost-effective, and easy-to-use object storage service that enables you to store, back up, and archive large amounts of data in the cloud.</p>

<h2 id="demo">Demo</h2>

<h3 id="connect-to-oss">Connect to OSS</h3>

<p>Before we start the demo, let&rsquo;s learn how to connect OSS to a Spring Cloud application.
<strong>Note: This section is to show you how to connect to oss. The actual configurations have been completed in the following example, and you only need to specify your accessKeyId, secretAccessKey and region.</strong></p>

<ol>
<li><p>Add dependency spring-cloud-starter-alibaba-storage in the pom.xml file in your Spring Cloud project.</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-alibaba-storage&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre></li>

<li><p>Configure accessKeyId, secretAccessKey and region in application.properties.</p>

<pre><code>// application.properties
spring.cloud.alibaba.oss.accessKeyId=your-ak
spring.cloud.alibaba.oss.secretAccessKey=your-sk
spring.cloud.alibaba.oss.region=cn-beijing
</code></pre>

<p>To get accessKeyId, secretAccessKey, follow these steps:</p>

<ol>
<li>On the Alibaba Cloud console, click your avatar on the upper-right corner and click accesskeys. Or visit <a href="https://usercenter.console.aliyun.com/">User Management</a> page directly：
<br /></li>
</ol>

<p><img src="https://cdn.nlark.com/lark/0/2018/png/64647/1535464041257-5c7ae997-daff-45b3-89d4-02d578da4ac7.png" alt="undefined" /></p>

<ol>
<li>Get your accessKeyId、secretAccessKey：</li>
</ol>

<p><img src="https://cdn.nlark.com/lark/0/2018/png/64647/1535464098793-517491f6-156b-4a98-a5a4-6113cb3c01a4.png" alt="undefined" /></p>

<p><strong>Note:</strong> If you are using <a href="https://www.alibabacloud.com/help/doc-detail/28756.html">STS</a>, you should configure securityToken in addition to accessKeyId, secretAccessKey, and region.</p></li>

<li><p>Inject OSSClient and use it to upload files to the OSS server and download a file from OSS server.</p>

<pre><code>@Service
public class YourService {
    @Autowired
    private OSSClient ossClient;

    public void saveFile() {
        // download file to local
        ossClient.getObject(new GetObjectRequest(bucketName, objectName), new File(&quot;pathOfYourLocalFile&quot;));
    }
}
</code></pre></li>
</ol>

<p><strong>Note:</strong> Direct injection into the OSSClient mode is typically used for scenarios where you need to handle a large number of file objects. If you only need to read the contents of the file object, OSS Starter also supports reading the file in <a href="#1">Resource mode</a>.</p>

<h3 id="start-application">Start Application</h3>

<ol>
<li><p>Add necessary configurations to file <code>/src/main/resources/application.properties</code>.</p>

<pre><code>spring.application.name=oss-example
server.port=18084
spring.cloud.alibaba.oss.accessKeyId=your-ak
spring.cloud.alibaba.oss.secretAccessKey=your-sk
spring.cloud.alibaba.oss.region=cn-beijing
</code></pre></li>

<li><p>Start the application in IDE or by building a fatjar.</p>

<ul>
<li>Start in IDE: Find main class <code>OSSApplication</code>, and execute the main method.</li>
<li>Build a fatjar：

<ol>
<li>Execute command <code>mvn clean package</code> to build a fatjar.</li>
<li>Run command <code>java -jar oss-example.jar</code> to start the application.</li>
</ol></li>
</ul></li>
</ol>

<p>After startup, a bucket called &lsquo;spring-cloud-alibaba&rsquo; is automatically created in OSS.</p>

<h3 id="upload-or-download-files">Upload or download files</h3>

<h4 id="upload-files">Upload files</h4>

<p>Run <code>curl</code> command to upload files. It will upload file &lsquo;oss-test.json&rsquo; in the <code>classpath</code> directory. The content of this file is JSON string:</p>

<pre><code>curl http://localhost:18084/upload
</code></pre>

<p>Results：</p>

<pre><code>// If configurations are correct, the output will be as follows
upload success
// If an error occurs during uploading, the output will be 'upload fail: fail reason'. For example, if accessKeyId is wrong，the output will be
upload fail: The OSS Access Key Id you provided does not exist in our records. [ErrorCode]: InvalidAccessKeyId [RequestId]: RequestId [HostId]: xxx.oss-cn-beijing.aliyuncs.com [ResponseError]: InvalidAccessKeyId The OSS Access Key Id you provided does not exist in our records. RequestId xxx.oss-cn-beijing.aliyuncs.com xxx-accessKeyId
</code></pre>

<h4 id="download-files">Download files</h4>

<p>Use <code>curl</code> command to download files. It will download the oss-test.json file that you uploaded just now and print in result):</p>

<pre><code>curl http://localhost:18084/download
</code></pre>

<p>Results：</p>

<pre><code>// If configurations are correct, the output will be as follows
download success, content: { &quot;name&quot;: &quot;spring-cloud-alibaba&quot;, &quot;github&quot;: &quot;https://github.com/spring-cloud-incubator/spring-cloud-alibaba&quot;, &quot;authors&quot;: [&quot;Jim&quot;, &quot;flystar32&quot;], &quot;emails&quot;: [&quot;fangjian0423@gmail.com&quot;, &quot;flystar32@163.com&quot;] }
// If an error occurs during downloading, the output will be 'download fail: fail reason'. For example, if accessKeyId is wrong，fail reason will be as follows
download fail: The OSS Access Key Id you provided does not exist in our records. [ErrorCode]: InvalidAccessKeyId [RequestId]: RequestId [HostId]: xxx.oss-cn-beijing.aliyuncs.com [ResponseError]: InvalidAccessKeyId The OSS Access Key Id you provided does not exist in our records. RequestId sxxx.oss-cn-beijing.aliyuncs.com xxx-accessKeyId
</code></pre>

<h3 id="verify-results-on-oss">Verify results on OSS</h3>

<p>You can verify results on the OSS console when you finish uploading or downloading files.
1. Log on to the <a href="https://oss.console.aliyun.com/">OSS console</a>，and you will find a bucket named <code>spring-cloud-alibaba</code>.</p>

<p><img src="https://cdn.nlark.com/lark/0/2018/png/64647/1535464204462-ccebb9e0-7233-499c-8dec-8b8348231b2b.png" alt="undefined" /></p>

<ol>
<li>Click the <code>spring-cloud-alibaba</code> bucket, select the Files tab, and you will find the oss-test file. The file &lsquo;oss-test&rsquo; is located in directory &lsquo;custom-dir&rsquo;. The objectName of the file is &lsquo;custom-dir/oss-test&rsquo;. File directory and file is separated by &lsquo;/&rsquo;.</li>
</ol>

<p><img src="https://cdn.nlark.com/lark/0/2018/png/64647/1535618026281-613a338c-f89c-4c7b-8b04-d404d1320699.png" alt="undefined" /></p>

<h2 id="endpoint">Endpoint</h2>

<p>OSS starter also supports the implmentation of Spring Boot acutator endpoints.</p>

<p><strong>Prerequisite:</strong></p>

<p>Add denpendency <code>spring-boot-starter-actuator</code> to your pom.xml file, and configure your endpoint security stategy.</p>

<ul>
<li>Spring Boot1.x: Add configuration <code>management.security.enabled=false</code></li>
<li>Spring Boot2.x: Add configuration <code>management.endpoints.web.exposure.include=*</code></li>
</ul>

<p>To view the endpoint information, visit the following URLs:</p>

<p>Spring Boot1.x: OSS Endpoint URL is <a href="http://127.0.0.1:18084/oss">http://127.0.0.1:18084/oss</a>.</p>

<p>Spring Boot2.x: OSS Endpoint URL is <a href="http://127.0.0.1:18084/acutator/oss">http://127.0.0.1:18084/acutator/oss</a>.</p>

<p>Endpoint will show the configurations and the list of buckets of all OSSClients.</p>

<p><img src="https://cdn.nlark.com/lark/0/2018/png/64647/1535373658171-20674565-6fe1-4e1e-a596-1dd6f4159ec3.png" alt="undefined" /></p>

<h2 id="multiple-ossclients">Multiple OSSClients</h2>

<p>If you need multiple OSSClients，like Multi DataSources, build <code>OSSProperties</code> first，and then build <code>OSSClient</code>. Specify information such as assessKeyId and secrectAccessKey for each OSSClient.</p>

<pre><code>  @Bean
  @ConfigurationProperties(prefix = &quot;spring.cloud.alibaba.oss1&quot;)
  public OSSProperties ossProperties1() {
      return new OSSProperties();
  }

  @Bean
  public OSS ossClient1(@Qualifier(&quot;ossProperties1&quot;) OSSProperties ossProperties) {
      return new OSSClientBuilder().build(ossProperties.getEndpoint(),
              ossProperties.getAccessKeyId(), ossProperties.getSecretAccessKey(),
              ossProperties.getSecurityToken(), ossProperties.getConfiguration());
  }
</code></pre>

<ul>
<li>OSSClient shutdown：You do not need to shutdown OSSClient. It will be done in <code>OSSApplicationListener</code>.</li>
</ul>

<h2 id="1">Read file using resource mode</h2>

<p>OSS Starter supports getting file objects by <code>Spring Resource</code>. Simply configure OSS protocol of the resource：</p>

<pre><code>  @Value(&quot;oss://spring-cloud-alibaba/oss-test&quot;)
  private Resource file;

  // read file content
  StreamUtils.copyToString(file.getInputStream(), Charset.forName(CharEncoding.UTF_8))
</code></pre>

<h2 id="stop-ossclient-service">Stop OSSClient service</h2>

<p>You do not need to manually shut down OSSClient. OSS Starter calls all OSSClient shutdown methods in the <code>OSSApplicationListener</code> during ApplicationContext close.</p>

<p>If you have any feedback or suggestions for Spring Cloud OSS Starter, please don&rsquo;t hesitate to tell us by submitting github issues or via other community channels.</p>


<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/spring-cloud-alibaba/en/quick_start/nacos-config/" title="Nacos Config Example"> <i class="fas fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/spring-cloud-alibaba/en/quick_start/sentinel/" title="" style="margin-right: 0px;"><i class="fas fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/spring-cloud-alibaba/js/clipboard.min.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/perfect-scrollbar.min.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/perfect-scrollbar.jquery.min.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/jquery.sticky.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/featherlight.min.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/html5shiv-printshiv.min.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/highlight.pack.js?1542024317"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/spring-cloud-alibaba/js/modernizr.custom.71422.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/learn.js?1542024317"></script>
    <script src="/spring-cloud-alibaba/js/hugo-learn.js?1542024317"></script>

    <link href="/spring-cloud-alibaba/mermaid/mermaid.css?1542024317" type="text/css" rel="stylesheet" />
    <script src="/spring-cloud-alibaba/mermaid/mermaid.js?1542024317"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
